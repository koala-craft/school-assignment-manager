# 年度管理・学期管理テーブル UX課題調査レポート

**調査日**: 2026年2月12日  
**対象**: AcademicYearView.vue, TermView.vue, ga-design.css

---

## 1. レイアウト・アライメント

### 課題1-1: ヘッダーとデータ行のパディング不一致
- **現状**: ヘッダー `padding: var(--ga-space-sm) var(--ga-space-lg)` (8px 24px)、行 `padding: var(--ga-space-md) var(--ga-space-lg)` (16px 24px)
- **影響**: 列の左端が揃わず、視覚的な不整合が発生
- **優先度**: 高

### 課題1-2: ヘッダーと行の高さ・min-heightの不一致
- **現状**: ヘッダーにmin-heightなし、行は52px。ヘッダーが薄く見える
- **影響**: テーブル構造の威厳が損なわれる
- **優先度**: 中

### 課題1-3: グリッド列の固定幅による狭い画面での圧迫
- **現状**: 日付列110px、状態列90pxが固定。600px以下で90px/70pxに縮小
- **影響**: モバイルで日付が切れる、または極端に詰まる
- **優先度**: 中

---

## 2. インタラクション・タッチターゲット

### 課題2-1: 操作ボタンのタッチターゲット不足
- **現状**: `v-btn size="small"` で高さ約36px。WCAG 2.5.5 推奨は44×44px以上
- **影響**: モバイル・タッチ操作で誤タップや操作困難
- **優先度**: 高

### 課題2-2: 学期管理に編集・削除がない
- **現状**: 学期は読み取り専用。APIは apiResource で update/destroy 対応済み
- **影響**: 誤って作成した学期を削除・修正できない
- **優先度**: 中（機能追加のため別タスクとする）

### 課題2-3: 行全体のクリック領域
- **現状**: 行はホバー反応のみ、クリック可能なのは操作ボタンのみ
- **影響**: 年度の「有効にする」は行クリックで呼べない
- **優先度**: 低

---

## 3. フィードバック・状態表示

### 課題3-1: ローディング状態の不在
- **現状**: 初回読み込み・再読み込み時にスピナーやスケルトンなし
- **影響**: データ取得中か、空なのか判断できない
- **優先度**: 高

### 課題3-2: 「現在」年度の視覚的強調不足
- **現状**: 有効年度は緑チップ＋「現在」ボタン（disabled）のみ
- **影響**: どの年度がアクティブか一瞬で把握しにくい
- **優先度**: 中

### 課題3-3: 操作成功フィードバック
- **現状**: 年度を有効にした後、トースト等の表示なし
- **影響**: 操作が成功したか不安
- **優先度**: 低（既存のload()で再描画されるため許容）

---

## 4. アクセシビリティ

### 課題4-1: 操作ボタンのaria-label不足
- **現状**: 「有効にする」ボタンに説明がない
- **影響**: スクリーンリーダー利用者が文脈を理解しにくい
- **優先度**: 高

### 課題4-2: テーブルのセマンティクス
- **現状**: div + role="table" で擬似的にテーブル化
- **影響**: 一部ATで列とセルの対応が正しく伝わらない可能性
- **優先度**: 中（現状のroleは妥当）

### 課題4-3: フォーカス可視性
- **現状**: 行やセルにフォーカススタイルの明示なし
- **影響**: キーボード操作時に行の位置が分かりにくい
- **優先度**: 中

---

## 5. レスポンシブ

### 課題5-1: 600pxブレークポイントでの列幅
- **現状**: 6列レイアウトが 60px 1fr 90px 90px 70px 1fr に変更
- **影響**: 状態列70pxでチップが窮屈、操作列1frでボタンが伸びる
- **優先度**: 中

### 課題5-2: カードヘッダーのパディング
- **現状**: 600px以下で ga-card-header に padding-left/right: var(--ga-space-md)
- **影響**: テーブル本体は ga-modern-table の padding で別 management。整合性は取れている
- **優先度**: 低

---

## 6. その他

### 課題6-1: 日付フォーマット
- **現状**: APIのYYYY-MM-DDをそのまま表示
- **影響**: 日本の文脈では「2024年4月1日」の方が分かりやすい場合あり
- **優先度**: 低（現状で実用上問題なし）

### 課題6-2: スティッキーヘッダー
- **現状**: テーブルヘッダーがスクロールで消える
- **影響**: 行数が多い場合、列の意味が分からなくなる
- **優先度**: 低（通常は行数が少ない想定）

---

## 修正優先順位まとめ

| 優先度 | 課題 | 対応方針 | 実施 |
|--------|------|----------|------|
| 高 | 1-1 ヘッダー・行パディング不一致 | パディングを統一 | ✅ |
| 高 | 2-1 タッチターゲット不足 | ボタンにmin-height/min-width、またはpadding拡張 | ✅ |
| 高 | 3-1 ローディング状態 | スケルトンまたはv-progress-linear | ✅ |
| 高 | 4-1 aria-label | ボタンにaria-label追加 | ✅ |
| 中 | 1-2 ヘッダー高さ | ヘッダーにmin-height 44px | ✅ |
| 中 | 3-2 現在年度の強調 | 行に左ボーダーまたは背景色 | ✅ |
| 中 | 4-3 フォーカス可視性 | 行focus-visibleスタイル | ✅ |
| 中 | 5-1 レスポンシブ列幅 | 列幅の微調整 | ✅ |

## 追加対応（2026-02実施）

- 行全体クリックで「有効にする」可能に（年度管理）
- キーボード操作（Enter/Space）で行から有効化可能に
- スケルトンアニメーションに prefers-reduced-motion 対応
