# 学校提出物管理アプリ 要件定義書（実務精査版）

※ 本要件は、教育現場での継続運用・属人化防止・事故回避を前提に、実務経験を踏まえて再定義する。

---

## 1. 背景・目的

提出物管理は「登録・一覧・更新」ができれば成立するように見えて、実際には**責任境界・操作権限・履歴の扱い**が曖昧なまま運用され、トラブルになりやすい業務である。

本アプリは、

* 誰が何を見てよいか
* 誰がどこまで更新してよいか
* いつ・誰が・何を変更したか

を明確に定義し、**教員・学生双方が安心して使い続けられる提出物管理基盤**を提供することを目的とする。

---

## 2. 想定利用者・責務定義

### 2.1 利用者区分

* 管理者（教務・システム管理者）
* 教員
* 管理者学生（提出確認・補助業務を担う学生）
* 一般学生

### 2.2 責務の明確化

* 管理者：システム全体の整合性・年度管理
* 教員：評価判断（採点・再提出指示）の最終責任
* 管理者学生：事実ベースの提出状況更新のみを担当
* 一般学生：自身の課題状況の把握

※ 評価判断と事実更新を意図的に分離する。

---

## 3. システム概要

* Webブラウザ利用の業務Webアプリ
* Vue（フロント）＋ Laravel（API）分離構成
* 一覧画面を業務の起点とし、画面遷移を最小化
* 状態遷移・権限・履歴を中心に設計

---

## 4. 機能要件

### 4.1 認証・権限管理（精査）

* 全ユーザーはログイン必須

* ロールベース権限管理

  * 管理者
  * 教員
  * 管理者学生
  * 一般学生

* 権限は「画面表示」と「操作可能アクション」を分離して制御

* APIレベルでの権限チェックを必須とする

* 認証機能

  * ログイン（メールアドレス＋パスワード）
  * ログアウト
  * パスワードリセット（メールによる認証コード送信）
  * セッション管理（タイムアウト設定）
  * 多要素認証（将来的な拡張として検討）

* アカウント管理

  * ユーザープロフィール編集（氏名、メールアドレス）
  * パスワード変更
  * 初回ログイン時のパスワード変更強制

* 権限詳細

  * 管理者：全機能へのアクセス
  * 教員：担当科目の完全な管理権限
  * 複数教員が担当する科目の場合、全担当教員が同等の権限を持つ
  * 管理者学生：指定された科目の提出状況更新のみ（閲覧は全科目可能）
  * 一般学生：自身の履修科目の閲覧のみ

---

### 4.2 年度・学期管理（追加）

※ 実務上、最も抜けやすく事故が起きやすい領域

* 年度マスタの管理
* 学期（前期・後期等）の定義
* 科目・履修・提出物は必ず年度に紐づく
* 年度切替時のデータ参照制御（過去年度は参照のみ）

---

### 4.3 科目・履修管理

* 科目の登録・編集・無効化（論理削除）

* 科目には以下を保持

  * 年度
  * 学期
  * 担当教員（複数可）

* 学生との履修関係管理

* 履修の途中追加・解除を許容

---

### 4.4 学生管理

* 学生情報の登録・編集・無効化
* 学籍番号は年度内で一意
* 学生ロール（一般／管理者学生）の付与
* 管理者学生の対象科目を限定可能

---

### 4.5 提出物管理（精査）

* 提出物の登録・編集・無効化

* 必須項目

  * 対象科目
  * 提出期限
  * 採点対象フラグ
  * 評価方式（点数／評価）

* 提出期限は後から変更可能（履歴保持）

* 提出物テンプレート機能（追加）

  * よく使う提出物をテンプレートとして保存
  * テンプレートから新規提出物を作成
  * 前年度の提出物をコピーして新年度に流用
  * テンプレート内容：タイトル、説明、提出形式、評価方式

* 提出物の詳細項目

  * タイトル（必須）
  * 説明文（任意、Markdown対応）
  * 提出形式（ファイル／テキスト／両方）
  * 最大点数（点数評価の場合）
  * 評価段階（S/A/B/C/D等、評価方式の場合）
  * 公開日時（学生への表示開始日時）

---

### 4.6 提出状況・状態遷移管理（重要）

#### 4.6.1 提出状態

* 未提出
* 提出済み
* 採点済み
* 再提出待ち
* 再提出済み

#### 4.6.2 状態更新ルール

* 教員：全状態を更新可能
* 管理者学生：

  * 未提出 → 提出済み
  * 再提出待ち → 再提出済み

※ 採点済み・再提出待ちへの遷移は不可

* 一般学生：状態更新不可

#### 4.6.3 自動判定

* 提出期限超過かつ未提出は自動で期限超過フラグを付与
* 状態そのものは自動変更しない

---

### 4.7 採点・再提出管理

* 採点は教員のみ実施可能
* 採点時にコメント必須（空文字不可）
* 再提出指定時は再提出期限を必須入力
* 再提出回数を記録

* コメント・フィードバック機能

  * 教員から学生へのフィードバックコメント
  * 学生から教員への質問・コメント（提出時）
  * コメント履歴の保持
  * 添付ファイル付きコメント

* 一括操作機能（効率化）

  * 複数学生への一括採点（同じ点数・コメント）
  * 科目全体への一括通知送信
  * 未提出者への一括リマインダー送信
  * 提出状況の一括エクスポート

---

### 4.8 一覧・画面要件（精査）

#### 教員・管理者

* 科目別提出物一覧
* 提出物 × 学生のマトリクス表示
* 状態・期限超過・未採点フィルタ
* 一覧上からの直接操作（遷移最小）

#### 学生

* 自身の課題一覧

* 表示区分

  * 未対応（未提出・再提出待ち）
  * 対応済み（提出済み・採点済み）

* 提出期限順ソート

---

### 4.9 監査・履歴管理（追加）

* 提出状態の変更履歴を全件保持
* 変更者・変更日時・変更前後状態を記録
* 教員・管理者のみ閲覧可能

---

### 4.10 ファイル管理機能（追加）

※ 実務上、提出物の実体ファイル管理は必須

* 提出物へのファイルアップロード機能
* 許可する形式：PDF、Word、Excel、画像（jpg、png）、ZIP
* 最大ファイルサイズ：50MB
* ウイルススキャン対応（導入フェーズで要検討）
* ファイル名の自動整形（学籍番号_科目コード_提出日時）
* 複数ファイル対応（1提出につき最大5ファイル）
* 再提出時の旧ファイル保持（履歴管理）
* 教員によるファイルダウンロード（個別・一括）
* ストレージ容量管理（年度末クリーンアップ対応）

---

### 4.11 通知機能（追加）

※ 提出漏れ防止のための重要機能

* メール通知機能
  * 提出期限3日前の自動リマインダー
  * 提出期限当日の通知
  * 再提出指示の即時通知
  * 採点完了の通知
* システム内通知
  * 未読・既読管理
  * 通知一覧表示
  * 通知設定（ON/OFF切り替え）
* 通知対象
  * 学生：自身に関する通知のみ
  * 教員：担当科目の提出状況サマリ
  * 管理者：システム全体の重要通知

---

### 4.12 レポート・エクスポート機能（追加）

* CSV/Excelエクスポート
  * 科目別提出状況一覧
  * 学生別成績一覧
  * 期限超過レポート
  * 未提出者リスト
* PDFレポート生成
  * 個人別成績表
  * 科目別評価一覧
* 出力権限
  * 教員：担当科目のみ
  * 管理者：全科目
  * 学生：自身のデータのみ

---

### 4.13 システム設定管理（追加）

* 管理者専用設定画面
  * メール送信設定（SMTP設定）
  * 通知タイミング設定
  * ファイルアップロード設定（許可形式・サイズ上限）
  * セッションタイムアウト設定
  * パスワードポリシー設定
* 年度切替機能
  * 新年度開始処理
  * 過去年度アーカイブ化
* バックアップ・リストア
  * 定期バックアップ設定
  * 手動バックアップ実行
  * リストア機能（管理者のみ）

---

### 4.14 検索・絞り込み機能（追加）

* 科目検索（名称・コード・担当教員）
* 学生検索（学籍番号・氏名）
* 提出物検索（タイトル・期間）
* 詳細フィルタ
  * 提出状態による絞り込み
  * 期限超過のみ表示
  * 未採点のみ表示
  * 評価範囲による絞り込み

---

### 4.15 データインポート機能（追加）

* CSVによる一括登録
  * 学生情報の一括インポート
  * 履修情報の一括インポート
  * 提出物の一括登録
* インポート時のバリデーション
  * 必須項目チェック
  * 形式チェック
  * 重複チェック
* エラーレポート出力
  * エラー行の特定
  * エラー内容の詳細表示

---

### 4.16 画面一覧・画面遷移（追加）

#### 共通画面

* ログイン画面
* パスワードリセット画面
* パスワード変更画面
* プロフィール編集画面
* 通知一覧画面
* ヘルプ・FAQ画面

#### 管理者専用画面

* ダッシュボード（システム全体の統計）
* ユーザー管理画面（一覧・登録・編集）
* 年度管理画面
* 学期管理画面
* システム設定画面
* バックアップ・リストア画面
* 監査ログ閲覧画面

#### 教員画面

* ダッシュボード（担当科目の統計）
* 科目管理画面（一覧・登録・編集）
* 提出物管理画面（一覧・登録・編集）
* 提出状況一覧画面（マトリクス表示）
* 採点画面
* 学生別提出状況詳細画面
* レポート出力画面

#### 管理者学生画面

* ダッシュボード（担当科目の提出状況）
* 提出状況更新画面
* 科目別提出一覧画面

#### 一般学生画面

* ダッシュボード（自身の課題状況）
* 課題一覧画面（未対応・対応済み）
* 提出画面（ファイルアップロード）
* 提出履歴・成績閲覧画面
* 科目別課題一覧画面

---

### 4.17 国際化・アクセシビリティ（追加）

* タイムゾーン管理
  * システムタイムゾーンの設定（日本時間：Asia/Tokyo）
  * 提出期限の明確な表示（YYYY-MM-DD HH:MM形式）
  * サーバー時刻との同期

* アクセシビリティ対応
  * WAI-ARIA準拠
  * キーボード操作のみで全機能にアクセス可能
  * スクリーンリーダー対応
  * 適切なコントラスト比の確保
  * フォントサイズの調整機能

* 多言語対応（将来的な拡張）
  * 現時点では日本語のみ対応
  * 多言語化を見据えた設計（i18n対応）
  * メッセージの外部ファイル化

---

### 4.18 プライバシー・個人情報保護（追加）

* 個人情報の取り扱い
  * 学生の氏名、学籍番号、メールアドレスは個人情報として厳重に管理
  * 提出物に含まれる個人情報の適切な保護
  * 個人情報の第三者提供は原則禁止

* データアクセス制御
  * 学生は自身のデータのみ閲覧可能
  * 教員は担当科目の学生データのみ閲覧可能
  * 管理者は必要最小限のアクセス権限

* データ保持期間
  * 学生データ：卒業後3年間保持
  * 提出物データ：卒業後1年間保持
  * 監査ログ：最低5年間保持
  * 保持期間経過後は安全に削除

* 個人情報削除リクエスト対応
  * 学生からの削除リクエストに対応する仕組み
  * 法的要件を満たす範囲での削除実施
  * 削除履歴の記録

---

## 5. 非機能要件（実務精査）

### 5.1 操作性

* 一覧起点で業務が完結するUI
* 確認ダイアログの適切な使用（誤操作防止）
* レスポンシブデザイン（スマートフォン・タブレット対応）
* 入力補完機能（科目名、学生名など）
* キーボードショートカット対応
* ページング処理（大量データ対応）
* ローディング表示（処理中の明示）

### 5.2 パフォーマンス

* 学生100〜200名規模での安定動作
* N+1対策必須
* 一覧画面の表示速度：3秒以内
* API応答時間：平均500ms以内
* 同時接続数：50ユーザーまで対応
* ファイルアップロード時の非同期処理
* データベースインデックス最適化
* キャッシュ戦略（Redis使用を推奨）

### 5.3 セキュリティ

* CSRF対策（Laravel Sanctum使用）
* 権限昇格防止
* 監査ログの改ざん不可設計
* XSS対策（エスケープ処理の徹底）
* SQLインジェクション対策（Eloquent ORM使用）
* パスワードハッシュ化（bcrypt使用）
* セッション管理の適切な実装
* ファイルアップロード時のバリデーション
  * MIMEタイプチェック
  * ファイル拡張子チェック
  * ファイルサイズチェック
  * ファイル名のサニタイズ
* HTTPS通信必須（本番環境）
* API認証（Laravel Sanctum使用、SPAトークン認証）
* レート制限（ブルートフォース攻撃対策）
  * ログイン試行：5回/分
  * API呼び出し：60回/分（認証済みユーザー）
* 個人情報の暗号化保存（必要に応じて）
* Content Security Policy (CSP) の設定
* Same-Site Cookie属性の設定

### 5.4 保守性

* 状態遷移はService層で一元管理
* PolicyとServiceの責務分離
* 物理削除は禁止
* コーディング規約の遵守（PSR-12準拠）
* 自動テストの整備（カバレッジ80%以上）
* ドキュメントの整備（API仕様書、ER図、画面遷移図）
* ログ出力の標準化
* エラーハンドリングの統一
* バージョン管理（Git使用）

### 5.5 可用性

* システム稼働率：99%以上（提出期限前は特に重要）
* データベースの定期バックアップ（日次）
* 障害時の復旧手順書整備
* エラー発生時の適切なメッセージ表示
* システムメンテナンスの事前通知機能

### 5.6 拡張性

* APIのバージョニング対応
* マイクロサービス化を見据えた設計
* 外部システム連携の余地（学務システム等）
* プラグイン機構の検討

### 5.7 バリデーション要件

* フロントエンド側での即時バリデーション
* バックエンド側での厳密なバリデーション
* バリデーションルールの一元管理
* エラーメッセージの日本語化・具体化
* 必須項目の明示

### 5.8 ログ・監視要件

* アプリケーションログ
  * エラーログ（ERROR、CRITICAL）
  * 警告ログ（WARNING）
  * 情報ログ（INFO）
* アクセスログ
  * リクエストURL、IPアドレス、ユーザーID
* 監査ログ（前述の履歴管理とは別）
  * 管理者操作の全記録
  * 権限変更の記録
* ログローテーション設定
* ログの長期保存（最低1年）

### 5.9 エラーハンドリング

* 4xx系エラーの適切な処理
  * 400：バリデーションエラー（詳細表示）
  * 401：認証エラー（ログイン画面へリダイレクト）
  * 403：権限エラー（権限不足メッセージ）
  * 404：リソース不存在（404ページ表示）
* 5xx系エラーの適切な処理
  * 500：サーバーエラー（エラーページ表示、管理者へ通知）
  * 503：メンテナンス中（メンテナンスページ表示）
* フロントエンドでのエラーハンドリング
  * ネットワークエラーの検知と再試行
  * タイムアウト処理
* エラー発生時のユーザーへの適切なフィードバック

---

## 6. 技術要件

### 6.1 フロントエンド

* フレームワーク：Vue.js 3.x
* 状態管理：Pinia
* UIコンポーネント：Vuetify 3.x または PrimeVue
* HTTP通信：Axios
* ルーティング：Vue Router
* バリデーション：Vuelidate または VeeValidate
* ビルドツール：Vite
* TypeScript使用（型安全性の確保）

### 6.2 バックエンド

* フレームワーク：Laravel 11.x
* PHP：8.2以上
* アーキテクチャ：REST API
* 認証：Laravel Sanctum（SPA認証）
* バリデーション：Form Request使用
* ORM：Eloquent
* キュー：Redis Queue（メール送信、ファイル処理）
* タスクスケジューラ：Laravel Scheduler（通知、バックアップ）

### 6.3 データベース

* RDBMS：PostgreSQL 15.x以上
  * 状態・履歴・年度管理に強い
  * JSONデータ型のサポート
* マイグレーション管理必須
* シーディング整備（開発・テスト用）
* インデックス設計の最適化

### 6.4 インフラ・環境

* コンテナ化：Docker + Docker Compose
* Webサーバー：Nginx
* キャッシュ：Redis
* メール：Mailpit（開発環境）/ SMTP（本番環境）
* ストレージ：ローカルストレージ または S3互換ストレージ

### 6.5 開発環境

* バージョン管理：Git
* ブランチ戦略：Git Flow
* コードレビュー必須
* IDE：Visual Studio Code 推奨
* リンター・フォーマッター
  * PHP：Laravel Pint、PHPStan
  * JavaScript/TypeScript：ESLint、Prettier
* コミットメッセージ規約：Conventional Commits

### 6.6 テスト要件

* バックエンド
  * ユニットテスト：PHPUnit（カバレッジ80%以上）
  * 機能テスト：Feature Test
  * APIテスト：Postman または REST Client
* フロントエンド
  * ユニットテスト：Vitest
  * E2Eテスト：Playwright または Cypress（主要フロー）
* テストデータ
  * Factory、Seederの整備
  * テスト用DB環境の分離
* CI/CD
  * 自動テスト実行
  * コードカバレッジレポート

### 6.7 デプロイ要件

* 環境構成
  * 開発環境（ローカル）
  * ステージング環境（本番同等）
  * 本番環境
* デプロイ方法
  * 自動デプロイ推奨（GitHub Actions等）
  * ゼロダウンタイムデプロイ
* 環境変数管理
  * .envファイルによる環境別設定
  * 機密情報の安全な管理
* データベースマイグレーション
  * デプロイ時の自動実行
  * ロールバック手順の整備

### 6.8 監視・運用

* アプリケーション監視
  * エラー監視：Sentry 推奨
  * パフォーマンス監視：Laravel Telescope（開発環境）
* インフラ監視
  * サーバーリソース監視
  * データベース監視
* ヘルスチェック
  * API死活監視
  * データベース接続確認

---

## 7. 開発フェーズ要件

### 7.1 要件定義フェーズ

* 要件定義書の作成・レビュー
* 画面遷移図の作成
* ER図の作成
* ユースケース図の作成
* ステークホルダーレビュー

### 7.2 設計フェーズ

* データベース設計（物理設計）
* API仕様書の作成
* クラス設計
* 状態遷移図の詳細化
* セキュリティ設計

### 7.3 実装フェーズ

* 開発環境構築
* バックエンドAPI実装
* フロントエンド実装
* ユニットテスト作成
* コードレビュー実施

### 7.4 テストフェーズ

* 単体テスト
* 結合テスト
* システムテスト
* ユーザー受け入れテスト（UAT）
* パフォーマンステスト
* セキュリティテスト

### 7.5 リリースフェーズ

* ステージング環境での動作確認
* データマイグレーション手順確認
* 本番環境へのデプロイ
* リリース後の監視
* ユーザーマニュアルの作成

---

## 8. 運用要件

### 8.1 日次運用

* バックアップの実行確認
* エラーログの確認
* システム稼働状況の確認

### 8.2 週次運用

* パフォーマンスレポートの確認
* ストレージ使用量の確認
* 未解決エラーの対応

### 8.3 月次運用

* セキュリティアップデートの適用
* バックアップデータの整合性確認
* アクセス統計の分析

### 8.4 年次運用

* 年度切替処理
* 過去年度データのアーカイブ化
* システム全体のパフォーマンスレビュー
* セキュリティ監査

### 8.5 障害対応

* 障害検知から5分以内の初動対応
* 障害レベルの分類（Critical、High、Medium、Low）
* エスカレーションフロー
* 障害報告書の作成
* 再発防止策の策定

### 8.6 問い合わせ対応

* ユーザーサポート窓口の設置
* FAQ整備
* 問い合わせ記録の管理
* 対応履歴の蓄積

---

## 9. データ移行要件

### 9.1 初期データ投入

* マスタデータの投入（年度、学期）
* ユーザーデータの投入（管理者、教員、学生）
* 科目データの投入
* 履修データの投入

### 9.2 既存システムからの移行（該当する場合）

* 既存データの抽出
* データクレンジング
* データ変換
* データ投入
* データ整合性確認

---

## 10. ドキュメント要件

### 10.1 技術ドキュメント

* システム構成図
* ER図
* API仕様書（OpenAPI/Swagger形式）
* 画面遷移図
* 状態遷移図
* コーディング規約

### 10.2 運用ドキュメント

* 環境構築手順書（開発者向け）
* デプロイ手順書
* バックアップ・リストア手順書
* 障害対応手順書
* 監視設定ドキュメント

### 10.3 ユーザードキュメント

* ユーザーマニュアル（管理者向け）
* ユーザーマニュアル（教員向け）
* ユーザーマニュアル（学生向け）
* よくある質問（FAQ）
* 操作動画（オプション）

---

## 11. 制約事項・前提条件

### 11.1 制約事項

* 対象ブラウザ：Chrome、Edge、Safari、Firefox（最新版および1つ前のバージョン）
* 画面解像度：最小1280x720を推奨
* ファイルアップロード容量制限あり
* 同時編集には未対応（楽観的ロックで対応）

### 11.2 前提条件

* 学生・教員のメールアドレスが事前に登録されていること
* 科目コード体系が定義されていること
* 年度・学期の運用ルールが明確であること
* サーバーリソースが十分に確保されていること

---

## 12. リスク管理

### 12.1 技術的リスク

* パフォーマンス劣化リスク
  * 対策：早期のパフォーマンステスト実施
* セキュリティ脆弱性リスク
  * 対策：定期的なセキュリティ監査
* データ損失リスク
  * 対策：バックアップの徹底と定期的なリストアテスト

### 12.2 運用リスク

* ユーザーの操作ミスリスク
  * 対策：確認ダイアログの適切な配置、操作マニュアルの充実
* 年度切替時のトラブルリスク
  * 対策：事前の十分なテストと手順書整備
* サポート対応の遅延リスク
  * 対策：FAQの充実、サポート体制の明確化

### 12.3 法的・コンプライアンスリスク

* 個人情報漏洩リスク
  * 対策：セキュリティ監査、アクセス制御の徹底
* 著作権侵害リスク（提出物に含まれる可能性）
  * 対策：利用規約の明示、ユーザー教育
* データ保持期間違反リスク
  * 対策：自動削除機能の実装、定期的な確認

---

## 12.4 コンプライアンス要件（追加）

* 個人情報保護法への対応
  * 個人情報の適切な取得・利用・管理
  * プライバシーポリシーの策定と公開
  * 利用規約の策定と同意取得

* 学校教育法等の関連法規への対応
  * 成績管理の適切性
  * 記録の保存期間の遵守

* 利用規約
  * システム利用時の規約同意
  * 禁止事項の明示
  * 免責事項の明記

---

## 13. 実装優先順位（追加）

実装は以下の優先順位（フェーズ）で進めることを推奨します。

### Phase 1: 基盤機能（必須・最優先）

1. 認証・権限管理（ログイン、パスワードリセット）
2. ユーザー管理（管理者、教員、学生）
3. 年度・学期管理
4. 科目管理・履修管理
5. 提出物管理（基本CRUD）
6. 提出状況管理（基本的な状態遷移）

### Phase 2: コア業務機能（必須）

7. ファイル管理機能（アップロード、ダウンロード）
8. 採点機能
9. 提出履歴管理
10. 一覧画面・マトリクス表示
11. 基本的な検索・絞り込み
12. エクスポート機能（CSV）

### Phase 3: 運用効率化機能（重要）

13. 通知機能（メール、システム内通知）
14. 一括操作機能
15. データインポート機能
16. 提出物テンプレート機能
17. コメント・フィードバック機能
18. 詳細検索機能

### Phase 4: 管理・保守機能（重要）

19. システム設定管理
20. バックアップ・リストア機能
21. 監査ログ閲覧機能
22. レポート機能（PDF）
23. ダッシュボード・統計機能

### Phase 5: 拡張機能（オプション）

24. 高度な通知設定
25. アクセシビリティ強化
26. 多言語対応
27. 外部システム連携
28. モバイルアプリ対応

**注**: Phase 1-2 が完了した時点で、最小限の運用開始が可能です。

---

## 14. 完成の定義

* 責任境界がUIと仕様の両面で明確
* 学年度を跨いでも破綻しない
* 管理者学生を含めた運用が安全に成立
* 誰が何をしたか後から必ず追跡できる
* Phase 1-2 の全機能が実装されている
* 全ての機能テストが合格している
* パフォーマンス要件を満たしている
* セキュリティテストに合格している
* ユーザー受け入れテストに合格している
* ドキュメントが全て整備されている

本システムは、**現場運用に耐えることを最優先とした提出物管理基盤**とする。

---

## 15. データモデル概要（追加）

### 15.1 主要テーブル一覧

* **users**: ユーザー情報（管理者、教員、学生）
* **academic_years**: 年度マスタ
* **terms**: 学期マスタ
* **subjects**: 科目情報
* **subject_teachers**: 科目担当教員（中間テーブル）
* **enrollments**: 履修情報
* **assignments**: 提出物情報
* **submissions**: 提出状況
* **submission_histories**: 提出状況変更履歴
* **submission_files**: 提出ファイル情報
* **assignment_templates**: 提出物テンプレート
* **notifications**: 通知情報
* **audit_logs**: 監査ログ

### 14.2 主要リレーション

* users 1:N subjects（担当教員として）
* subjects N:M users（subject_teachersを介して）
* subjects 1:N assignments
* subjects 1:N enrollments
* users 1:N enrollments（学生として）
* assignments 1:N submissions
* users 1:N submissions
* submissions 1:N submission_histories
* submissions 1:N submission_files

### 14.3 インデックス設計

パフォーマンスのため、以下にインデックスを設定:

* users: email（unique）、role
* subjects: academic_year_id、term_id
* assignments: subject_id、deadline
* submissions: assignment_id、user_id、status
* enrollments: subject_id、user_id（複合unique）

---

## 15. 参考資料

* 環境構築手順書：`環境構築手順書.md`
* API仕様書：（実装時に作成、OpenAPI 3.0形式）
* ER図：（設計時に作成、draw.io または PlantUML）
* 画面遷移図：（設計時に作成）
* コーディング規約：（実装開始前に作成）
* テスト仕様書：（実装時に作成）
